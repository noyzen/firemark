<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; font-src 'self' data:; script-src 'self';" />
  <title>Firemark</title>
  <link rel="stylesheet" href="../../fonts/all.min.css" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="window-border"></div>
  <div id="titlebar">
    <div class="drag-region">
      <div class="window-title" id="window-title">
        <i class="fa-solid fa-fire-flame-curved"></i>
        <span>Firemark</span>
      </div>
    </div>
    <div class="window-controls">
      <button id="min-btn" title="Minimize" aria-label="Minimize"><i class="fa-solid fa-window-minimize"></i></button>
      <button id="max-btn" title="Maximize" aria-label="Maximize"><i id="max-icon" class="fa-regular fa-window-maximize"></i></button>
      <button id="close-btn" title="Close" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
    </div>
  </div>

  <div id="app-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2><i class="fa-solid fa-sliders"></i> Controls</h2>
      </div>
      <div class="sidebar-content">
        <!-- Presets -->
        <div class="control-group">
            <button class="group-header collapsible">
                <h3><i class="fa-solid fa-star"></i> Presets</h3>
                <i class="fa-solid fa-chevron-down collapse-icon"></i>
            </button>
            <div class="group-body">
                <div class="presets-group">
                    <div class="custom-select">
                        <select id="presets-select"><option value="">Select a preset...</option></select>
                    </div>
                    <button id="preset-add-btn" class="button-icon" title="Save as New Preset"><i class="fa-solid fa-plus"></i></button>
                    <button id="preset-update-btn" class="button-icon" title="Update Selected Preset" disabled><i class="fa-solid fa-save"></i></button>
                    <button id="preset-delete-btn" class="button-icon" title="Delete Selected Preset" disabled><i class="fa-solid fa-trash"></i></button>
                </div>
            </div>
        </div>

        <!-- Text Watermark -->
        <div class="control-group" id="text-group">
          <button class="group-header collapsible">
            <h3><i class="fa-solid fa-font"></i> Text Watermarks</h3>
            <div class="header-controls">
                <span class="header-indicator"></span>
                <label class="toggle-switch"><input type="checkbox" id="text-group-enable"><span class="slider"></span></label>
                <i class="fa-solid fa-chevron-down collapse-icon"></i>
            </div>
          </button>
          <div class="group-body">
            <div class="layer-manager">
              <div class="layer-list" id="text-layers-list"></div>
              <button id="add-text-btn" class="button-secondary add-layer-btn"><i class="fa-solid fa-plus"></i> Add Text</button>
            </div>
            <div id="text-controls-wrapper" class="controls-wrapper disabled">
              <label for="text-content">Text</label>
              <div class="input-with-button">
                  <textarea id="text-content" rows="2">© Your Brand</textarea>
                  <button id="emoji-picker-btn" class="button-icon" title="Add Emoji"><i class="fa-regular fa-face-smile"></i></button>
              </div>
              
              <label for="text-font-family">Font</label>
              <div class="custom-select">
                  <select id="text-font-family">
                      <!-- Dynamically populated -->
                  </select>
              </div>
              <label>Font Size, Style & Alignment</label>
              <div class="inline-controls">
                <input type="number" id="text-font-size" value="48" min="8">
                <div class="text-styles">
                    <button id="text-bold" data-style="bold" title="Bold"><i class="fa-solid fa-bold"></i></button>
                    <button id="text-italic" data-style="italic" title="Italic"><i class="fa-solid fa-italic"></i></button>
                    <button id="text-align-left" data-align="left" class="active" title="Align Left"><i class="fa-solid fa-align-left"></i></button>
                    <button id="text-align-center" data-align="center" title="Align Center"><i class="fa-solid fa-align-center"></i></button>
                    <button id="text-align-right" data-align="right" title="Align Right"><i class="fa-solid fa-align-right"></i></button>
                </div>
              </div>
              <label for="text-line-height">Line Height</label>
              <div class="range-with-value">
                <input type="range" id="text-line-height" min="0.8" max="3" step="0.1" value="1.2">
                <span class="value-display" id="text-line-height-value">1.2</span>
              </div>

              <label for="text-color">Color & Opacity</label>
              <div class="color-opacity">
                <input type="color" id="text-color" value="#FFFFFF" title="Primary Color">
                <input type="range" id="text-opacity" min="0" max="1" step="0.01" value="0.7">
                <span class="value-display" id="text-opacity-value">70%</span>
              </div>
              <div class="sub-control-header">
                <label for="text-gradient-enable">Gradient</label>
                <label class="toggle-switch"><input type="checkbox" id="text-gradient-enable"><span class="slider"></span></label>
              </div>
              <div id="text-gradient-controls" class="sub-group hidden">
                  <input type="color" id="text-gradient-color" value="#4a90e2" title="Gradient End Color">
                  <div class="custom-select">
                      <select id="text-gradient-direction">
                          <option value="vertical">Vertical</option><option value="horizontal">Horizontal</option>
                      </select>
                  </div>
              </div>
              <div class="sub-control-header">
                  <label for="text-stroke-enable">Stroke (Outline)</label>
                  <label class="toggle-switch"><input type="checkbox" id="text-stroke-enable"><span class="slider"></span></label>
              </div>
              <div id="text-stroke-controls" class="sub-group hidden">
                 <input type="color" id="text-stroke-color" value="#000000" title="Stroke Color">
                 <input type="range" id="text-stroke-width" min="1" max="10" value="2">
                 <span class="value-display" id="text-stroke-width-value">2px</span>
              </div>
              <div class="sub-control-header">
                  <label for="text-shadow-enable">Drop Shadow</label>
                  <label class="toggle-switch"><input type="checkbox" id="text-shadow-enable"><span class="slider"></span></label>
              </div>
              <div id="text-shadow-controls" class="sub-group hidden">
                 <input type="color" id="text-shadow-color" value="#000000" title="Shadow Color">
                 <input type="range" id="text-shadow-blur" min="0" max="20" value="5">
                 <span class="value-display" id="text-shadow-blur-value">5px</span>
              </div>
              <div class="sub-control-header">
                  <label for="text-free-placement">Free Placement</label>
                  <label class="toggle-switch"><input type="checkbox" id="text-free-placement"><span class="slider"></span></label>
              </div>
              <div class="recenter-container hidden" id="text-recenter-container">
                  <button id="text-recenter-btn" class="button-secondary"><i class="fa-solid fa-crosshairs"></i> Recenter</button>
              </div>
              <label>Position & Padding</label>
              <div class="position-grid" id="text-position">
                <button data-position="top-left"></button><button data-position="top-center"></button><button data-position="top-right"></button>
                <button data-position="center-left"></button><button data-position="center" class="active"></button><button data-position="center-right"></button>
                <button data-position="bottom-left"></button><button data-position="bottom-center"></button><button data-position="bottom-right"></button>
              </div>
               <div class="range-with-value">
                  <input type="range" id="text-padding" min="0" max="200" step="1" value="20">
                  <span class="value-display" id="text-padding-value">20px</span>
              </div>
              <label for="text-rotation">Rotation</label>
              <div class="range-with-value">
                <input type="range" id="text-rotation" min="-180" max="180" step="1" value="0">
                <span class="value-display" id="text-rotation-value">0°</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Logo Watermark -->
        <div class="control-group" id="logo-group">
            <button class="group-header collapsible">
                <h3><i class="fa-regular fa-image"></i> Logo Watermarks</h3>
                <div class="header-controls">
                    <span class="header-indicator"></span>
                    <label class="toggle-switch"><input type="checkbox" id="logo-group-enable"><span class="slider"></span></label>
                    <i class="fa-solid fa-chevron-down collapse-icon"></i>
                </div>
            </button>
            <div class="group-body">
              <div class="layer-manager">
                <div class="layer-list" id="logo-layers-list"></div>
                <button id="add-logo-btn" class="button-secondary add-layer-btn"><i class="fa-solid fa-plus"></i> Add Logo</button>
              </div>
              <div id="logo-controls-wrapper" class="controls-wrapper disabled">
                <div id="logo-preview-container" class="hidden">
                    <img id="logo-preview" src="#" alt="Logo Preview">
                    <span id="logo-filename"></span>
                </div>
                <label for="logo-size">Size (% of image width)</label>
                <div class="range-with-value">
                    <input type="range" id="logo-size" min="1" max="100" value="15">
                    <span class="value-display" id="logo-size-value">15%</span>
                </div>
                <label for="logo-opacity">Opacity</label>
                 <div class="range-with-value">
                    <input type="range" id="logo-opacity" min="0" max="1" step="0.01" value="0.7">
                    <span class="value-display" id="logo-opacity-value">70%</span>
                </div>
                <label for="logo-rotation">Rotation</label>
                <div class="range-with-value">
                  <input type="range" id="logo-rotation" min="-180" max="180" step="1" value="0">
                  <span class="value-display" id="logo-rotation-value">0°</span>
                </div>
                <div class="sub-control-header">
                    <label for="logo-free-placement">Free Placement</label>
                    <label class="toggle-switch"><input type="checkbox" id="logo-free-placement"><span class="slider"></span></label>
                </div>
                <div class="recenter-container hidden" id="logo-recenter-container">
                    <button id="logo-recenter-btn" class="button-secondary"><i class="fa-solid fa-crosshairs"></i> Recenter</button>
                </div>
                <label>Position & Padding</label>
                <div class="position-grid" id="logo-position">
                    <button data-position="top-left"></button><button data-position="top-center"></button><button data-position="top-right"></button>
                    <button data-position="center-left"></button><button data-position="center"></button><button data-position="center-right"></button>
                    <button data-position="bottom-left" class="active"></button><button data-position="bottom-center"></button><button data-position="bottom-right"></button>
                </div>
                <div class="range-with-value">
                    <input type="range" id="logo-padding" min="0" max="200" step="1" value="20">
                    <span class="value-display" id="logo-padding-value">20px</span>
                </div>
              </div>
            </div>
        </div>

        <!-- Icon Watermark -->
        <div class="control-group" id="icon-group">
            <button class="group-header collapsible">
                <h3><i class="fa-solid fa-icons"></i> Icon Watermarks</h3>
                <div class="header-controls">
                    <span class="header-indicator"></span>
                    <label class="toggle-switch"><input type="checkbox" id="icon-group-enable"><span class="slider"></span></label>
                    <i class="fa-solid fa-chevron-down collapse-icon"></i>
                </div>
            </button>
            <div class="group-body">
              <div class="layer-manager">
                <div class="layer-list" id="icon-layers-list"></div>
                <button id="add-icon-btn" class="button-secondary add-layer-btn"><i class="fa-solid fa-plus"></i> Add Icon</button>
              </div>
              <div id="icon-controls-wrapper" class="controls-wrapper disabled">
                <button id="icon-picker-btn" class="button-secondary" style="width: 100%; justify-content: space-between;">
                    <span id="icon-picker-btn-text">Select Icon...</span>
                    <i class="fa-solid fa-arrow-pointer"></i>
                </button>
                <label for="icon-size">Size</label>
                <div class="range-with-value">
                    <input type="range" id="icon-size" min="10" max="500" value="64">
                    <span class="value-display" id="icon-size-value">64px</span>
                </div>
                <label for="icon-color">Color & Opacity</label>
                <div class="color-opacity">
                    <input type="color" id="icon-color" value="#FFFFFF">
                    <input type="range" id="icon-opacity" min="0" max="1" step="0.01" value="0.7">
                    <span class="value-display" id="icon-opacity-value">70%</span>
                </div>
                <label for="icon-rotation">Rotation</label>
                <div class="range-with-value">
                  <input type="range" id="icon-rotation" min="-180" max="180" step="1" value="0">
                  <span class="value-display" id="icon-rotation-value">0°</span>
                </div>
                <div class="sub-control-header">
                    <label for="icon-free-placement">Free Placement</label>
                    <label class="toggle-switch"><input type="checkbox" id="icon-free-placement"><span class="slider"></span></label>
                </div>
                 <div class="recenter-container hidden" id="icon-recenter-container">
                    <button id="icon-recenter-btn" class="button-secondary"><i class="fa-solid fa-crosshairs"></i> Recenter</button>
                </div>
                <label>Position & Padding</label>
                <div class="position-grid" id="icon-position">
                    <button data-position="top-left"></button><button data-position="top-center"></button><button data-position="top-right"></button>
                    <button data-position="center-left"></button><button data-position="center"></button><button data-position="center-right"></button>
                    <button data-position="bottom-right" class="active"></button><button data-position="bottom-center"></button><button data-position="bottom-left"></button>
                </div>
                <div class="range-with-value">
                    <input type="range" id="icon-padding" min="0" max="200" step="1" value="20">
                    <span class="value-display" id="icon-padding-value">20px</span>
                </div>
              </div>
            </div>
        </div>
        
        <!-- Tiled Watermark -->
        <div class="control-group" id="tile-group">
            <button class="group-header collapsible">
                <h3><i class="fa-solid fa-table-cells"></i> Tiled Watermark</h3>
                <div class="header-controls">
                    <span class="header-indicator"></span>
                    <label class="toggle-switch"><input type="checkbox" id="tile-enable"><span class="slider"></span></label>
                    <i class="fa-solid fa-chevron-down collapse-icon"></i>
                </div>
            </button>
            <div class="group-body">
                 <div class="sub-control-header">
                    <label for="tile-use-logo">Use Active Logo Layer for Tile</label>
                    <label class="toggle-switch"><input type="checkbox" id="tile-use-logo"><span class="slider"></span></label>
                </div>
                <div id="tile-text-options">
                    <label for="tile-text-content">Text</label>
                    <input type="text" id="tile-text-content" value="Protected">
                    <label for="tile-font-family">Font</label>
                    <div class="custom-select">
                        <select id="tile-font-family">
                            <!-- Dynamically populated -->
                        </select>
                    </div>
                    <label for="tile-font-size">Font Size & Color</label>
                    <div class="inline-controls">
                        <input type="number" id="tile-font-size" value="32" min="8" title="Font Size">
                        <input type="color" id="tile-color" value="#FFFFFF" title="Font Color">
                    </div>
                </div>
                <label for="tile-opacity">Opacity</label>
                <div class="range-with-value">
                    <input type="range" id="tile-opacity" min="0" max="1" step="0.01" value="0.15">
                    <span class="value-display" id="tile-opacity-value">15%</span>
                </div>
                <label for="tile-rotation">Rotation</label>
                <div class="range-with-value">
                    <input type="range" id="tile-rotation" min="-90" max="90" value="-30">
                    <span class="value-display" id="tile-rotation-value">-30°</span>
                </div>
                <label for="tile-spacing">Spacing</label>
                <div class="range-with-value">
                    <input type="range" id="tile-spacing" min="-200" max="500" value="150">
                    <span class="value-display" id="tile-spacing-value">150px</span>
                </div>
            </div>
        </div>

        <!-- Pattern Overlay -->
        <div class="control-group" id="pattern-group">
            <button class="group-header collapsible">
                <h3><i class="fa-solid fa-layer-group"></i> Pattern Overlay</h3>
                <div class="header-controls">
                    <span class="header-indicator"></span>
                    <label class="toggle-switch"><input type="checkbox" id="pattern-enable"><span class="slider"></span></label>
                    <i class="fa-solid fa-chevron-down collapse-icon"></i>
                </div>
            </button>
            <div class="group-body">
                <label for="pattern-type">Pattern Type</label>
                <div class="custom-select">
                    <select id="pattern-type">
                        <option value="checker">Checkerboard</option>
                        <option value="lines">Diagonal Lines</option>
                        <option value="cross">Crosshatch</option>
                        <option value="dots">Dots</option>
                        <option value="honeycomb">Honeycomb</option>
                        <option value="zigzag">Zigzag</option>
                        <option value="vlines">Vertical Lines</option>
                        <option value="hlines">Horizontal Lines</option>
                        <option value="bricks">Bricks</option>
                        <option value="triangles">Triangles (Tiled)</option>
                        <option value="waves">Waves</option>
                    </select>
                </div>
                <label for="pattern-color1">Colors & Opacity</label>
                <div class="color-opacity">
                    <input type="color" id="pattern-color1" value="#000000" title="Primary Color">
                    <input type="color" id="pattern-color2" value="#FFFFFF" title="Secondary Color">
                    <input type="range" id="pattern-opacity" min="0" max="1" step="0.01" value="0.1">
                    <span class="value-display" id="pattern-opacity-value">10%</span>
                </div>
                <label for="pattern-size">Size / Density</label>
                <div class="range-with-value">
                    <input type="range" id="pattern-size" min="5" max="100" value="20">
                    <span class="value-display" id="pattern-size-value">20px</span>
                </div>
            </div>
        </div>

        <!-- Frame -->
        <div class="control-group" id="frame-group">
            <button class="group-header collapsible">
                <h3><i class="fa-solid fa-border-all"></i> Frame</h3>
                <div class="header-controls">
                    <span class="header-indicator"></span>
                    <label class="toggle-switch"><input type="checkbox" id="frame-enable"><span class="slider"></span></label>
                    <i class="fa-solid fa-chevron-down collapse-icon"></i>
                </div>
            </button>
            <div class="group-body">
                <label for="frame-style">Style</label>
                <div class="custom-select">
                    <select id="frame-style">
                        <optgroup label="Borders">
                            <option value="single">Single Line</option>
                            <option value="double">Double Line</option>
                            <option value="inset">Inset</option>
                            <option value="dotted">Dotted</option>
                            <option value="dashed">Dashed</option>
                        </optgroup>
                        <optgroup label="Corner Styles">
                            <option value="corner-photo">Photo Corners</option>
                            <option value="corner-classic">Classic Bracket</option>
                            <option value="corner-tech">Tech Bracket</option>
                            <option value="corner-slash">Triple Slash</option>
                        </optgroup>
                    </select>
                </div>
                <label for="frame-color">Color</label>
                <input type="color" id="frame-color" value="#FFFFFF">
                <label for="frame-width">Thickness</label>
                <div class="range-with-value">
                    <input type="range" id="frame-width" min="1" max="50" value="5">
                    <span class="value-display" id="frame-width-value">5px</span>
                </div>
                <label for="frame-padding">Padding</label>
                <div class="range-with-value">
                    <input type="range" id="frame-padding" min="0" max="100" value="10">
                    <span class="value-display" id="frame-padding-value">10px</span>
                </div>
            </div>
        </div>

        <!-- Image Effects -->
        <div class="control-group" id="effects-group">
            <button class="group-header collapsible">
                <h3><i class="fa-solid fa-wand-magic-sparkles"></i> Image Effects</h3>
                <div class="header-controls">
                    <span class="header-indicator"></span>
                    <label class="toggle-switch"><input type="checkbox" id="effects-group-enable"><span class="slider"></span></label>
                    <i class="fa-solid fa-chevron-down collapse-icon"></i>
                </div>
            </button>
            <div class="group-body">
                <label>Brightness</label>
                <div class="range-with-value"><input type="range" id="effect-brightness" min="0" max="2" step="0.01" value="1"><span class="value-display" id="effect-brightness-value">100%</span></div>
                <label>Contrast</label>
                <div class="range-with-value"><input type="range" id="effect-contrast" min="0" max="2" step="0.01" value="1"><span class="value-display" id="effect-contrast-value">100%</span></div>
                <label>Grayscale</label>
                <div class="range-with-value"><input type="range" id="effect-grayscale" min="0" max="1" step="0.01" value="0"><span class="value-display" id="effect-grayscale-value">0%</span></div>
                <div class="sub-control-header">
                  <label for="effect-blur-enable">Gaussian Blur</label>
                  <label class="toggle-switch"><input type="checkbox" id="effect-blur-enable"><span class="slider"></span></label>
                </div>
                <div class="range-with-value"><input type="range" id="effect-blur-radius" min="0" max="20" step="0.1" value="0"><span class="value-display" id="effect-blur-radius-value">0px</span></div>
                <div class="sub-control-header">
                  <label for="effect-noise-enable">Noise</label>
                  <label class="toggle-switch"><input type="checkbox" id="effect-noise-enable"><span class="slider"></span></label>
                </div>
                <div class="range-with-value"><input type="range" id="effect-noise-amount" min="0" max="100" value="0"><span class="value-display" id="effect-noise-amount-value">0%</span></div>
                <div class="sub-control-header">
                  <label for="effect-sharpen-enable">Sharpen</label>
                  <label class="toggle-switch"><input type="checkbox" id="effect-sharpen-enable"><span class="slider"></span></label>
                </div>
                <div class="range-with-value"><input type="range" id="effect-sharpen-amount" min="0" max="2" step="0.1" value="0"><span class="value-display" id="effect-sharpen-amount-value">0%</span></div>
            </div>
        </div>
        
        <!-- Output Settings -->
        <div class="control-group">
          <button class="group-header collapsible">
            <h3><i class="fa-solid fa-download"></i> Output Settings</h3>
            <i class="fa-solid fa-chevron-down collapse-icon"></i>
          </button>
          <div class="group-body">
            <button id="output-dir-btn" class="button-secondary">Select Output Folder</button>
            <p id="output-dir-path">No folder selected</p>
            <label for="output-format">Format</label>
            <div class="custom-select">
                <select id="output-format">
                  <option value="png">PNG</option>
                  <option value="jpeg">JPEG</option>
                  <option value="webp">WebP</option>
                </select>
            </div>
            <div id="format-specific-output">
                <div id="quality-control" class="hidden">
                  <label for="output-quality">Quality</label>
                  <div class="range-with-value">
                    <input type="range" id="output-quality" min="0.1" max="1" step="0.01" value="0.9">
                    <span class="value-display" id="output-quality-value">90%</span>
                  </div>
                </div>
                <div id="png-info-control">
                    <p class="control-info">PNG is a lossless format. Quality is always maximum.</p>
                </div>
            </div>
            <label for="resize-mode">Resize</label>
            <div class="custom-select">
                <select id="resize-mode">
                    <option value="none">None</option>
                    <option value="width">Max Width</option>
                    <option value="height">Max Height</option>
                    <option value="fit">Max Dimensions</option>
                </select>
            </div>
            <div id="resize-controls" class="inline-controls hidden">
                <input type="number" id="resize-width" placeholder="Width" value="1920">
                <input type="number" id="resize-height" placeholder="Height" value="1080">
            </div>
          </div>
        </div>
      </div>
    </aside>

    <main class="main-content">
      <div id="grid-view">
        <div id="dropzone">
          <div class="dropzone-content">
            <i class="fa-solid fa-images"></i>
            <p>Drag & Drop Images Here</p>
            <span>or</span>
            <button id="add-images-btn" class="button-primary">Browse Files</button>
          </div>
        </div>
        <div id="grid-header" class="hidden">
            <h3 id="grid-title">Image List</h3>
            <div id="processing-status" class="hidden">
                <div id="progress-container" class="hidden">
                    <p id="progress-text"></p>
                    <div class="progress-bar">
                        <div id="progress-bar-inner"></div>
                    </div>
                </div>
                <div id="completion-container" class="hidden"></div>
            </div>
            <div id="header-actions" class="header-actions">
                <button id="clear-images-btn" class="button-danger">Clear All</button>
                <button id="start-btn" class="button-start" disabled>
                    <span class="btn-text">Start Watermarking</span>
                    <i class="fa-solid fa-circle-notch fa-spin btn-spinner hidden"></i>
                </button>
            </div>
        </div>
        <div id="image-grid" class="hidden"></div>
      </div>
      
      <div id="preview-view" class="hidden">
          <div class="preview-header">
              <div class="header-left">
                  <button id="back-to-grid-btn" class="button-secondary" title="Back to List"><i class="fa-solid fa-arrow-left"></i> Back</button>
                  <button id="prev-image-btn" title="Previous Image"><i class="fa-solid fa-chevron-left"></i></button>
                  <button id="next-image-btn" title="Next Image"><i class="fa-solid fa-chevron-right"></i></button>
              </div>
              <div class="header-center">
                  <span id="preview-image-name"></span>
              </div>
              <div class="header-right">
                  <button id="zoom-out-btn" title="Zoom Out"><i class="fa-solid fa-magnifying-glass-minus"></i></button>
                  <span id="zoom-level">100%</span>
                  <button id="zoom-in-btn" title="Zoom In"><i class="fa-solid fa-magnifying-glass-plus"></i></button>
                  <button id="zoom-reset-btn" title="Fit to Screen"><i class="fa-solid fa-compress"></i></button>
                  <button id="toggle-watermark-btn" title="Hold to view original"><i class="fa-solid fa-eye-slash"></i></button>
              </div>
          </div>
          <div id="preview-canvas-container">
              <canvas id="preview-canvas"></canvas>
          </div>
      </div>
    </main>
  </div>
  
  <div id="icon-picker-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
        <h2>Select an Icon</h2>
        <input type="text" id="icon-search-input" placeholder="Search icons...">
        <div id="icon-picker-grid"></div>
    </div>
  </div>
  
  <div id="emoji-picker-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
        <h2>Select an Emoji</h2>
        <div id="emoji-picker-grid"></div>
    </div>
  </div>

  <div id="preset-save-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
        <h2>Save Preset</h2>
        <label for="preset-name-input">Preset Name</label>
        <input type="text" id="preset-name-input" placeholder="e.g., My Signature">
        <div class="modal-actions">
            <button id="preset-save-cancel-btn" class="button-secondary">Cancel</button>
            <button id="preset-save-confirm-btn" class="button-primary">Save</button>
        </div>
    </div>
  </div>

  <div id="preset-delete-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
          <h2>Delete Preset</h2>
          <p id="preset-delete-confirm-text"></p>
          <div class="modal-actions">
              <button id="preset-delete-cancel-btn" class="button-secondary">Cancel</button>
              <button id="preset-delete-confirm-btn" class="button-danger">Delete</button>
          </div>
      </div>
  </div>

  <script src="dist/main.js" defer></script>
</body>
</html>